{"version":3,"sources":["common/lib/vector2d.js","02_vector_tree/index.js"],"names":["Vector2D","x","y","v","a","scale","length","rad","c","Math","cos","s","sin","hypot","atan2","canvas","document","querySelector","ctx","getContext","drawBranch","context","v0","thickness","dir","bias","rotate","v1","copy","add","lineWidth","beginPath","moveTo","lineTo","stroke","PI","random","save","strokeStyle","th","restore","translate","height","lineCap"],"mappings":"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","file":"02_vector_tree.e22230fb.js","sourceRoot":"..","sourcesContent":["export class Vector2D {\r\n    constructor(x = 1, y = 0) {\r\n      this.x = x;\r\n      this.y = y;\r\n    }\r\n\r\n    get length() {\r\n      return Math.hypot(this.x, this.y);\r\n    }\r\n  \r\n    get dir() {\r\n      return Math.atan2(this.y, this.x);\r\n    }\r\n  \r\n    copy() {\r\n      return new Vector2D(this.x, this.y);\r\n    }\r\n  \r\n    add(v) {\r\n      this.x += v.x;\r\n      this.y += v.y;\r\n      return this;\r\n    }\r\n  \r\n    sub(v) {\r\n      debugger\r\n      this.x -= v.x;\r\n      this.y -= v.y;\r\n      return this;\r\n    }\r\n  \r\n    scale(a) {\r\n      this.x *= a;\r\n      this.y *= a;\r\n      return this;\r\n    }\r\n  \r\n    cross(v) {\r\n      return this.x * v.y - v.x * this.y;\r\n    }\r\n  \r\n    dot(v) {\r\n      return this.x * v.x + v.y * this.y;\r\n    }\r\n  \r\n    normalize() {\r\n      return this.scale(1 / this.length);\r\n    }\r\n  \r\n    rotate(rad) {\r\n      const c = Math.cos(rad),\r\n        s = Math.sin(rad);\r\n      const [x, y] = this;\r\n  \r\n      this.x = x * c + y * -s;\r\n      this.y = x * s + y * c;\r\n  \r\n      return this;\r\n    }\r\n  }","import {Vector2D} from '../common/lib/vector2d.js';\r\n\r\nconst canvas = document.querySelector('canvas');\r\nconst ctx = canvas.getContext('2d');\r\n\r\nctx.translate(0, canvas.height);\r\nctx.scale(1, -1);\r\nctx.lineCap = 'round';\r\n\r\nfunction drawBranch(context, v0, length, thickness, dir, bias) {\r\n  const v = new Vector2D().rotate(dir).scale(length);\r\n  const v1 = v0.copy().add(v);\r\n\r\n  context.lineWidth = thickness;\r\n  context.beginPath();\r\n  context.moveTo(...v0);\r\n  context.lineTo(...v1);\r\n  context.stroke();\r\n\r\n  if(thickness > 2) {\r\n    const left = Math.PI / 4 + 0.5 * (dir + 0.2) + bias * (Math.random() - 0.5);\r\n    drawBranch(context, v1, length * 0.9, thickness * 0.8, left, bias * 0.9);\r\n    const right = Math.PI / 4 + 0.5 * (dir - 0.2) + bias * (Math.random() - 0.5);\r\n    drawBranch(context, v1, length * 0.9, thickness * 0.8, right, bias * 0.9);\r\n  }\r\n\r\n  if(thickness < 5 && Math.random() < 0.3) {\r\n    context.save();\r\n    context.strokeStyle = '#c72c35';\r\n    const th = Math.random() * 6 + 3;\r\n    context.lineWidth = th;\r\n    context.beginPath();\r\n    context.moveTo(...v1);\r\n    context.lineTo(v1.x, v1.y - 2);\r\n    context.stroke();\r\n    context.restore();\r\n  }\r\n}\r\n\r\nconst v0 = new Vector2D(256, 0);\r\ndrawBranch(ctx, v0, 50, 10, Math.PI/2, 3);"]}